# X平台数据追踪器 - 测试指南

## 测试准备

### 1. 加载扩展

1. 打开Chrome浏览器
2. 访问 `chrome://extensions/`
3. 启用右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹: `/Users/qianzhang/Documents/worktrees/x-platform-tracker`
6. 确认扩展已成功加载（应该看到扩展图标）

### 2. 打开开发者工具

1. 访问 `https://x.com`
2. 按 `F12` 或右键点击页面选择"检查"
3. 切换到"Console"标签页
4. 应该看到消息: "X Platform Tracker content script loaded"

### 3. 检查后台脚本

1. 在 `chrome://extensions/` 页面
2. 找到"X平台数据追踪器"
3. 点击"Service Worker"链接（如果显示）
4. 检查是否有错误消息

## 功能测试

### 测试1: 点赞追踪

1. 在X平台上找到任意推文
2. 点击推文下方的"点赞"按钮（心形图标）
3. 点击浏览器工具栏中的扩展图标
4. **预期结果**:
   - 弹窗中"点赞"计数应该增加1
   - "最近活动"列表应该显示刚才的点赞操作

### 测试2: 转发追踪

1. 在X平台上找到任意推文
2. 点击推文下方的"转发"按钮
3. 点击浏览器工具栏中的扩展图标
4. **预期结果**:
   - 弹窗中"转发"计数应该增加1
   - "最近活动"列表应该显示刚才的转发操作

### 测试3: 数据持久化

1. 进行几次点赞和转发操作
2. 关闭所有浏览器标签页
3. 重新打开浏览器和X.com
4. 点击扩展图标
5. **预期结果**:
   - 之前的数据仍然存在
   - 统计数字保持不变

### 测试4: 数据清空

1. 点击扩展图标打开弹窗
2. 点击"清空数据"按钮
3. 确认清空操作
4. **预期结果**:
   - 所有统计数据归零
   - 最近活动列表为空

### 测试5: 动态加载推文

1. 滚动到页面底部，加载更多推文
2. 对新加载的推文进行点赞或转发
3. 点击扩展图标
4. **预期结果**:
   - 新操作被正确记录
   - 统计数据正确更新

## 调试技巧

### 查看存储的数据

1. 访问 `chrome://extensions/`
2. 找到"X平台数据追踪器"
3. 点击"详细信息"
4. 在"存储使用"部分查看数据

### 检查Console错误

如果功能不工作，检查Console标签页是否有错误：

**常见问题**:
- `chrome.runtime is not defined` - 扩展没有正确加载
- `Cannot read property of undefined` - DOM选择器可能失效
- 无错误消息但功能不工作 - 可能需要刷新页面

### 手动触发消息

在Console中运行以下代码测试消息发送：

```javascript
chrome.runtime.sendMessage({
  type: 'LOG_ACTIVITY',
  activity: {
    id: Date.now().toString(),
    type: 'like',
    postId: 'test123',
    content: '测试内容',
    timestamp: Date.now(),
    url: 'https://x.com/i/web/status/test123'
  }
});
```

然后打开扩展弹窗，应该看到这条测试记录。

## 性能检查

1. 打开Chrome任务管理器（Shift + Esc）
2. 检查扩展的内存和CPU使用情况
3. 在X平台上滚动和浏览时，观察性能影响
4. **预期**: 扩展应该使用最少资源，不影响正常浏览

## 已知问题

### 问题1: 图标显示不正确
**原因**: 使用的是占位图标文件
**解决**: 可以替换为真实图标（16x16, 48x48, 128x128 PNG）

### 问题2: 某些交互未被记录
**原因**: X平台可能更新了DOM结构
**解决**: 需要更新CSS选择器

### 问题3: 数据在浏览器重启后丢失
**原因**: Chrome Storage可能被清除
**解决**: 正常情况下数据会持久化，检查是否有清理软件

## 测试完成标准

所有以下条件满足即为测试通过：

- [ ] 扩展成功加载到Chrome
- [ ] 能够检测和记录点赞操作
- [ ] 能够检测和记录转发操作
- [ ] 今日统计数据正确显示
- [ ] 最近活动列表正确显示
- [ ] 数据清空功能正常工作
- [ ] 数据在浏览器重启后仍然存在
- [ ] 扩展不影响X平台的正常使用
- [ ] 活动记录延迟小于1秒
- [ ] 弹窗打开速度快

## 反馈记录

**测试日期**: ___________
**测试人员**: ___________
**Chrome版本**: ___________
**是否通过**: ☐ 通过 ☐ 未通过
**问题记录**:
___________________________________________________________
___________________________________________________________
___________________________________________________________
